<html>
<head>
	<meta charset="UTF-8">
	<title>招喚圖板緊急地下城查詢器 beta - v0.0.0.1</title>
</head>
<body>

請問您的ID第7碼是:
<select id="id_seven_number" onchange="select_number(this.options[this.options.selectedIndex].value);">
	<option>0</option>
	<option>1</option>
	<option>2</option>
	<option>3</option>
	<option>4</option>
	<option>5</option>
	<option>6</option>
	<option>7</option>
	<option>8</option>
	<option>9</option>
</select>
<input type="button" value="go" onclick="show_date();"/>
ex : 123,456,{7}89
<ul id="demo">
	<li>緊急任務</li>
</ul>

<!--<ul id="demo2">
	<li>曜日任務</li>
	<li>(一)</li>
	<li>(二)</li>
	<li>(三)</li>
	<li>(四)</li>
	<li>(五)</li>
	<li>(六)</li>
</ul>-->

<pre>ui 無修正版</pre>

<script>

	//<pre>2014/4/24 by hero, shesheshe98@hotmail.com</pre>s

	var base_time = new Date(2014, 3, 1);	//2014-4-1
	var now_time = new Date();
	var now_time_tmp = new Date();
	var ymd = '';
	
	var set = new Array();
		set[0] = 'A';
		set[1] = 'B';
		set[2] = 'C';
		set[3] = 'D';
		set[4] = 'E';
		set[5] = 'A';
		set[6] = 'B';
		set[7] = 'C';
		set[8] = 'D';
		set[9] = 'E';
		
	var set2number = new Array();
		set2number['A'] = 0;
		set2number['B'] = 1;
		set2number['C'] = 2;
		set2number['D'] = 3;
		set2number['E'] = 4;
		
	var val = new Array();
		val[0] = '闇';
		val[1] = '水';
		val[2] = '光';
		val[3] = '火';
		val[4] = '木';
		
	var day2str = new Array();
		day2str[0] = '日';
		day2str[1] = '一';
		day2str[2] = '二';
		day2str[3] = '三';
		day2str[4] = '四';	
		day2str[5] = '五';	
		day2str[6] = '六';	

	var val_date_class = new Array2DVar(5, 5);
	
		val_date_class[0][0] = '10:00, 15:00, 20:00';
		val_date_class[0][1] = '11:00, 16:00, 21:00';
		val_date_class[0][2] = '07:00, 12:00, 17:00';
		val_date_class[0][3] = '08:00, 13:00, 18:00';
		val_date_class[0][4] = '09:00, 14:00, 19:00';

		
		val_date_class[1][0] = '11:00, 16:00, 21:00';
		val_date_class[1][1] = '07:00, 12:00, 17:00';
		val_date_class[1][2] = '08:00, 13:00, 18:00';
		val_date_class[1][3] = '09:00, 14:00, 19:00';
		val_date_class[1][4] = '10:00, 15:00, 20:00';

		val_date_class[2][0] = '07:00, 12:00, 17:00';
		val_date_class[2][1] = '08:00, 13:00, 18:00';
		val_date_class[2][2] = '09:00, 14:00, 19:00';		
		val_date_class[2][3] = '10:00, 15:00, 20:00';
		val_date_class[2][4] = '11:00, 16:00, 21:00';

		val_date_class[3][0] = '08:00, 13:00, 18:00';			
		val_date_class[3][1] = '09:00, 14:00, 19:00';
		val_date_class[3][2] = '10:00, 15:00, 20:00';
		val_date_class[3][3] = '11:00, 16:00, 21:00';
		val_date_class[3][4] = '07:00, 12:00, 17:00';

		val_date_class[4][0] = '09:00, 14:00, 19:00';
		val_date_class[4][1] = '10:00, 15:00, 20:00';
		val_date_class[4][2] = '11:00, 16:00, 21:00';
		val_date_class[4][3] = '07:00, 12:00, 17:00';
		val_date_class[4][4] = '08:00, 13:00, 18:00';
		
	function show_date()
	{
		var form = document.getElementById('id_seven_number');
		var nowDay = 0;
		var nextDays = 7;
	
		for(var i=0; i<form.options.length; i++)
		{
			if(form.options[i].selected == true)
			{
				var diff = parseInt(Math.abs(now_time - base_time)/(1000 * 60 * 60 * 24));
				
				date_list(diff, nextDays, set2number[set[i]]);
			}
		
		}

	}
	
	function date_list(diff, nextDays, _class)
	{
		var data = new Array();
		
		data[0] = val[(diff)%5] + ' - ' + 
				  val_date_class[_class][(diff)%5] + ' - ' + 
				  date_format(now_time);
						
		for(var i=0; i<nextDays-1; i++)
		{
			now_time.setDate(now_time.getDate() + 1);

			data[i+1] = val[(diff+i+1)%5] + ' - ' + 
					    val_date_class[_class][(diff+i+1)%5] + ' - ' + 
					    date_format(now_time);
		}
		
		now_time.setDate(now_time_tmp.getDate());
		
		ui(data);
	
	}
	
	function ui(data)
	{
		var d = document.getElementById("demo");
		var n = new Object();
		
		d.innerHTML = '';
		for(var key in data)
		{
			n = document.createElement("li");
			n.innerHTML = data[key];
			d.appendChild(n);
		}
	}
	
	function date_format(date)
	{
		return now_time.getFullYear() + '/' + 
		       (now_time.getMonth()+1) + '/' + 
			   now_time.getDate() + ' (' + day2str[now_time.getDay()] + ')';
	}
	
	function select_number(number)
	{
		var set = document.getElementById('id_seven_number');
			
		set.options[number].selected = true;
	}
	
	function Array2DVar(x,y)
	{
		this.length = x;
		this.x = x;
		this.y = y;
		for(var i = 0; i < this.length; i++)
		this[i] = new Array(y);
	}

</script>
</body>
</html>